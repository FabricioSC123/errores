
[  1% 1182/60206] Building Kernel Image (Image.gz-dtb)
FAILED: /root/legion/out/target/product/surya/obj/KERNEL_OBJ/arch/arm64/boot/Image.gz-dtb
/bin/bash -c "(PATH=/root/legion/out/host/linux-x86/bin:\$PATH PATH=/root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-/bin:\$PATH PATH=/root/legion/prebuilts/tools-legion/linux-x86/bin:\$PATH LD_LIBRARY_PATH=/root/legion/prebuilts/tools-legion/linux-x86/lib:\$LD_LIBRARY_PATH PERL5LIB=/root/legion/prebuilts/tools-legion/common/perl-base BISON_PKGDATADIR=/root/legion/prebuilts/build-tools/common/bison /root/legion/prebuilts/build-tools/linux-x86/bin/make  -j8 CFLAGS_MODULE=\"-fno-pic\" CPATH=\"/usr/include:/usr/include/x86_64-linux-gnu\" HOSTCFLAGS=\"-fuse-ld=lld\" H

lang-r383902b/bin/clang++ LEX=/root/legion/prebuilts/build-tools/linux-x86/bin/flex YACC=/root/legion/prebuilts/build-tools/linux-x86/bin/bison M4=/root/legion/prebuilts/build-tools/linux-x86/bin/m4 -C kernel/xiaomi/surya O=/root/legion/out/target/product/surya/obj/KERNEL_OBJ ARCH=arm64 CROSS_COMPILE=\"/usr/bin/ccache /root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-\" CROSS_COMPILE_ARM32=\"/root/legion/prebuilts/gcc/linux-x86/arm/arm-eabi/bin/arm-eabi-\"         Image.gz-dtb ) && (if grep -q '^CONFIG_OF=y' /root/legion/out/target/product/surya/obj/KERNEL_OBJ/.config; then                       echo \"Building DTBs\";                         PATH=/root/legion/out/host/linux-x86/bin:\$PATH PATH=/root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-/bin:\$PATH PATH=/root/legion/prebuilts/tools-legion/linux-x86/bin:\$PATH LD_LIBRARY_PATH=/root/legion/prebuilts/tools-legion/linux-x86/lib:\$LD_LIBRARY_PATH PERL5LIB=/root/legion/prebuilts/tools-legion/common/perl-base BISON_PKGDATADIR=/root/legion/prebuilts/build-tools/common/bison /root/legion/prebuilts/build-tools/linux-x86/bin/make  -j8 CFLAGS_MODULE=\"-fno-pic\" CPATH=\"/usr/include:/usr/include/x86_64-linux-gnu\" HOSTCFLAGS=\"-fuse-ld=lld\" HOSTLDFLAGS=\"-L/usr/lib/x86_64-linux-gnu -L/usr/lib64 -fuse-ld=lld\" HOSTCC=/root/legion/prebuilts/clang/host/linux-x86/clang-r383902b/bin/clang HOSTCXX=/root/legion/prebuilts/clang/host/linux-x86/clang-r383902b/bin/clang++ LEX=/root/legion/prebuilts/build-tools/linux-x86/bin/flex YACC=/root/legion/prebuilts/build-tools/linux-x86/bin/bison M4=/root/legion/prebuilts/build-tools/linux-x86/bin/m4 -C kernel/xiaomi/surya O=/root/legion/out/target/product/surya/obj/KERNEL_OBJ ARCH=arm64 CROSS_COMPILE=\"/usr/bin/ccache /root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-\" CROSS_COMPILE_ARM32=\"/root/legion/prebuilts/gcc/linux-x86/arm/arm-eabi/bin/arm-eabi-\"         dtbs;          fi ) && (if grep -q '=m' /root/legion/out/target/product/surya/obj/KERNEL_OBJ/.config; then                   echo \"Building Kernel Modules\";                       PATH=/root/legion/out/host/linux-x86/bin:\$PATH PATH=/root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-/bin:\$PATH PATH=/root/legion/prebuilts/tools-legion/linux-x86/bin:\$PATH LD_LIBRARY_PATH=/root/legion/prebuilts/tools-legion/linux-x86/lib:\$LD_LIBRARY_PATH PERL5LIB=/root/legion/prebuilts/tools-legion/common/perl-base BISON_PKGDATADIR=/root/legion/prebuilts/build-tools/common/bison /root/legion/prebuilts/build-tools/linux-x86/bin/make  -j8 CFLAGS_MODULE=\"-fno-pic\" CPATH=\"/usr/include:/usr/include/x86_64-linux-gnu\" HOSTCFLAGS=\"-fuse-ld=lld\" HOSTLDFLAGS=\"-L/usr/lib/x86_64-linux-gnu -L/usr/lib64 -fuse-ld=lld\" HOSTCC=/root/legion/prebuilts/clang/host/linux-x86/clang-r383902b/bin/clang HOSTCXX=/root/legion/prebuilts/clang/host/linux-x86/clang-r383902b/bin/clang++ LEX=/root/legion/prebuilts/build-tools/linux-x86/bin/flex YACC=/root/legion/prebuilts/build-tools/linux-x86/bin/bison M4=/root/legion/prebuilts/build-tools/linux-x86/bin/m4 -C kernel/xiaomi/surya O=/root/legion/out/target/product/surya/obj/KERNEL_OBJ ARCH=arm64 CROSS_COMPILE=\"/usr/bin/ccache /root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-\" CROSS_COMPILE_ARM32=\"/root/legion/prebuilts/gcc/linux-x86/arm/arm-eabi/bin/arm-eabi-\"         modules || exit \"\$?\";                     echo \"Installing Kernel Modules\";                     PATH=/root/legion/out/host/linux-x86/bin:\$PATH PATH=/root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-/bin:\$PATH PATH=/root/legion/prebuilts/tools-legion/linux-x86/bin:\$PATH LD_LIBRARY_PATH=/root/legion/prebuilts/tools-legion/linux-x86/lib:\$LD_LIBRARY_PATH PERL5LIB=/root/legion/prebuilts/tools-legion/common/perl-base BISON_PKGDATADIR=/root/legion/prebuilts/build-tools/common/bison /root/legion/prebuilts/build-tools/linux-x86/bin/make
-j8 CFLAGS_MODULE=\"-fno-pic\" CPATH=\"/usr/include:/usr/include/x86_64-linux-gnu\" HOSTCFLAGS=\"-fuse-ld=lld\" HOSTLDFLAGS=\"-L/usr/lib/x86_64-linux-gnu -L/usr/lib64 -fuse-ld=lld\" HOSTCC=/root/legion/prebuilts/clang/host/linux-x86/clang-r383902b/bin/clang HOSTCXX=/root/legion/prebuilts/clang/host/linux-x86/clang-r383902b/bin/clang++ LEX=/root/legion/prebuilts/build-tools/linux-x86/bin/flex YACC=/root/legion/prebuilts/build-tools/linux-x86/bin/bison M4=/root/legion/prebuilts/build-tools/linux-x86/bin/m4 -C kernel/xiaomi/surya O=/root/legion/out/target/product/surya/obj/KERNEL_OBJ ARCH=arm64 CROSS_COMPILE=\"/usr/bin/ccache /root/legion/prebuilts/gcc/linux-x86/aarch64/aarch64-elf/bin/aarch64-elf-\" CROSS_COMPILE_ARM32=\"/root/legion/prebuilts/gcc/linux-x86/arm/arm-eabi/bin/arm-eabi-\"         INSTALL_MOD_PATH=/root/legion/out/target/product/surya/obj/PACKAGING/kernel_modules_intermediates INSTALL_MOD_STRIP=1 modules_install;                       kernel_release=\$(cat /root/legion/out/target/product/surya/obj/KERNEL_OBJ/include/config/kernel.release)                     kernel_modules_dir=/root/legion/out/target/product/surya/obj/PACKAGING/kernel_modules_intermediates/lib/modules/\$kernel_release                      ;                       modules=\$(find \$kernel_modules_dir -type f -name '*.ko');                     (    rm -rf /root/legion/out/target/product/surya/vendor/lib/modules ) && (mkdir -p /root/legion/out/target/product/surya/vendor/lib/modules ) && (cp \$modules /root/legion/out/target/product/surya/vendor/lib/modules/ ) && (rm -rf /root/legion/out/target/product/surya/obj/PACKAGING/depmod_vendor_intermediates ) && (mkdir -p /root/legion/out/target/product/surya/obj/PACKAGING/depmod_vendor_intermediates/lib/modules/0.0/vendor/lib/modules ) && (cp \$modules /root/legion/out/target/product/surya/obj/PACKAGING/depmod_vendor_intermediates/lib/modules/0.0/vendor/lib/modules ) && (/root/legion/out/host/linux-x86/bin/depmod -b /root/legion/out/target/product/surya/obj/PACKAGING/depmod_vendor_intermediates 0.0 ) && (sed -e 's/\\(.*modules.*\\):/\\/\\1:/g' -e 's/ \\([^ ]*modules[^ ]*\\)/ \\/\\1/g' /root/legion/out/target/product/surya/obj/PACKAGING/depmod_vendor_intermediates/lib/modules/0.0/modules.dep > /root/legion/out/target/product/surya/vendor/lib/modules/modules.dep ) && (cp /root/legion/out/target/product/surya/obj/PACKAGING/depmod_vendor_intermediates/lib/modules/0.0/modules.alias /root/legion/out/target/product/surya/vendor/lib/modules);                 fi )"
make: Entering directory '/root/legion/kernel/xiaomi/surya'
make[1]: Entering directory '/root/legion/out/target/product/surya/obj/KERNEL_OBJ'
  GEN     ./Makefile
scripts/kconfig/conf  --silentoldconfig Kconfig
  CHK     include/config/kernel.release
  GEN     ./Makefile
  CHK     include/generated/uapi/linux/version.h
  CHK     include/generated/utsrelease.h
  Using /root/legion/kernel/xiaomi/surya as source for kernel
  CHK     scripts/mod/devicetable-offsets.h
  CHK     include/generated/timeconst.h
  CHK     include/generated/bounds.h
  CHK     include/generated/asm-offsets.h
  CALL    /root/legion/kernel/xiaomi/surya/scripts/checksyscalls.sh
  CHK     include/generated/compile.h
  CHK     kernel/config_data.h
  DTC     arch/arm64/boot/dts/qcom/sdmmagpie.dtb
  DTC     arch/arm64/boot/dts/qcom/sdmmagpie-idp-overlay.dtbo
  CC      net/sysctl_net.o
  AS      net/wireguard/crypto/zinc/chacha20/chacha20-arm64.o
In file included from <command-line>:
./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:55: warning: "SYM_FUNC_START" redefined
   55 | #define SYM_FUNC_START ENTRY
      |
In file included from ./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:9,
                 from <command-line>:
../../../../../../kernel/xiaomi/surya/include/linux/linkage.h:214: note: this is the location of the previous definition
  214 | #define SYM_FUNC_START(name)                            \
      |
In file included from <command-line>:
./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:56: warning: "SYM_FUNC_END" redefined
   56 | #define SYM_FUNC_END ENDPROC
      |
In file included from ./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:9,
                 from <command-line>:
../../../../../../kernel/xiaomi/surya/include/linux/linkage.h:261: note: this is the location of the previous definition
  261 | #define SYM_FUNC_END(name)                              \
      |
  AS      net/wireguard/crypto/zinc/poly1305/poly1305-arm64.o
  CC      net/wireguard/crypto/zinc/curve25519/curve25519.o
In file included from <command-line>:
./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:55: warning: "SYM_FUNC_START" redefined
   55 | #define SYM_FUNC_START ENTRY
      |
In file included from ./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:9,
                 from <command-line>:
../../../../../../kernel/xiaomi/surya/include/linux/linkage.h:214: note: this is the location of the previous definition
  214 | #define SYM_FUNC_START(name)                            \
      |
In file included from <command-line>:
./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:56: warning: "SYM_FUNC_END" redefined
   56 | #define SYM_FUNC_END ENDPROC
      |
In file included from ./../../../../../../kernel/xiaomi/surya/net/wireguard/compat/compat-asm.h:9,
                 from <command-line>:
../../../../../../kernel/xiaomi/surya/include/linux/linkage.h:261: note: this is the location of the previous definition
  261 | #define SYM_FUNC_END(name)                              \
      |
aarch64-elf-gcc: internal compiler error: Segmentation fault signal terminated program cc1
Please submit a full bug report,
with preprocessed source if appropriate.
See <https://gcc.gnu.org/bugs/> for instructions.
make[3]: *** [/root/legion/kernel/xiaomi/surya/scripts/Makefile.build:365: net/wireguard/crypto/zinc/curve25519/curve25519.o] Error 4
make[3]: *** Deleting file 'net/wireguard/crypto/zinc/curve25519/curve25519.o'
make[2]: *** [/root/legion/kernel/xiaomi/surya/scripts/Makefile.build:678: net/wireguard] Error 2
make[1]: *** [/root/legion/kernel/xiaomi/surya/Makefile:1218: net] Error 2
make[1]: *** Waiting for unfinished jobs....
make[1]: Leaving directory '/root/legion/out/target/product/surya/obj/KERNEL_OBJ'
make: *** [Makefile:146: sub-make] Error 2
make: Leaving directory '/root/legion/kernel/xiaomi/surya'
[  1% 1183/60206] //hardware/interfaces/cas/1.2:android.hardware.cas@1.2 clang++ android/hardware/cas/1.2/types.cpp
[  1% 1184/60206] //hardware/interfaces/cas/1.1:android.hardware.cas@1.1 clang++ android/hardware/cas/1.1/MediaCasServiceAll.cpp [arm]
[  1% 1185/60206] //hardware/interfaces/cas/1.2:android.hardware.cas@1.2 clang++ android/hardware/cas/1.2/CasListenerAll.cpp
[  1% 1186/60206] //hardware/interfaces/cas/1.2:android.hardware.cas@1.2 clang++ android/hardware/cas/1.2/MediaCasServiceAll.cpp
[  1% 1187/60206] //hardware/interfaces/cas/1.2:android.hardware.cas@1.2 clang++ android/hardware/cas/1.2/CasAll.cpp
[  1% 1188/60206] //hardware/interfaces/cas/1.2:android.hardware.cas@1.2 clang++ android/hardware/cas/1.2/CasListenerAll.cpp [arm]
[  1% 1189/60206] //hardware/interfaces/cas/1.2:android.hardware.cas@1.2 clang++ android/hardware/cas/1.2/CasAll.cpp [arm]
ninja: build stopped: subcommand failed.
04:35:20 ninja failed with: exit status 1

#### failed to build some targets (01:59 (mm:ss)) ####
